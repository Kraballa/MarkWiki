{% extends 'base.html' %}

{% block header %}
|
{{path}}
{% endblock %}

{% block content %}
<form method="post" id="edit-form" target="{{target}}">
    <textarea form="edit-form" name="content" id="tarea" rows="25" autofocus>{{content}}</textarea>
    <input type="submit" value="save changes">
    <a href="/help.md" style="float: right;" target="_blank">syntax reference</a>
</form>
<script>
    let tarea = document.querySelector("#tarea");
    //move cursor to end
    tarea.selectionStart = tarea.value.length;

    window.addEventListener('beforeunload', function (e) {
        // Cancel the event
        e.preventDefault(); // If you prevent default behavior in Mozilla Firefox prompt will always be shown
        // Chrome requires returnValue to be set
        e.returnValue = 'Please save or backup your changes before leaving this page.';
    });
</script>
{% endblock %}